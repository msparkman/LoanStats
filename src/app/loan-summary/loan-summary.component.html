<div class="loan-summary-container">
  <div class="loan-form-card">
    <h1 class="page-title">Loan Calculator</h1>
    
    <form class="loan-form">
      <div class="form-group full-width">
        <label for="name">Loan Name</label>
        <input 
          id="name" 
          name="name"
          type="text" 
          [(ngModel)]="loan.name" 
          placeholder="My Home Loan"
          class="form-input">
      </div>
      
      <div class="form-row">
        <div class="form-group">
          <label for="principal">Principal Amount</label>
          <input 
            id="principal" 
            name="principal"
            type="string" 
            [(ngModel)]="loan.principal" 
            currency 
            required 
            placeholder="100,000"
            class="form-input">
        </div>
        
        <div class="form-group">
          <label for="rate">Interest Rate (%)</label>
          <input 
            id="rate" 
            name="rate"
            type="string" 
            [(ngModel)]="loan.rate" 
            required 
            placeholder="1.99"
            class="form-input">
        </div>
      </div>
      
      <div class="form-row">
        <div class="form-group">
          <label for="termYears">Term (Years)</label>
          <input 
            id="termYears" 
            name="termYears"
            type="string" 
            [(ngModel)]="loan.termYears" 
            placeholder="30"
            class="form-input">
        </div>
        
        <div class="form-group">
          <label for="monthlyPayment">Monthly Payment</label>
          <input 
            id="monthlyPayment" 
            name="monthlyPayment"
            type="string" 
            [(ngModel)]="loan.monthlyPayment" 
            placeholder="500"
            class="form-input">
        </div>
      </div>
      
      <div class="form-group full-width">
        <label for="extraPrincipalPayment">Extra Principal Payment</label>
        <input 
          id="extraPrincipalPayment" 
          name="extraPrincipalPayment"
          type="string" 
          [(ngModel)]="loan.extraPrincipalPayment" 
          placeholder="0"
          class="form-input">
      </div>
      
      <div class="button-row">
        <button type="button" (click)="calculate(loan)" class="calculate-btn">
          <span>Calculate Loan Summary</span>
        </button>
        <button type="button" (click)="saveLoan()" class="save-btn" [disabled]="!loan.name">
          <span>Save Loan</span>
        </button>
        <button type="button" (click)="clearForm()" class="clear-btn">
          <span>Clear</span>
        </button>
        <button type="button" (click)="toggleSavedLoans()" class="view-btn">
          <span>{{ showSavedLoans ? 'Hide' : 'View' }} Saved Loans</span>
        </button>
      </div>
      
      <div *ngIf="saveMessage" class="save-message">
        {{saveMessage}}
      </div>
    </form>
  </div>

  <div *ngIf="showSavedLoans" class="saved-loans-section">
    <h2>Saved Loans</h2>
    <div *ngIf="savedLoans.length === 0" class="no-loans-message">
      No saved loans found.
    </div>
    <div *ngFor="let savedLoan of savedLoans" class="saved-loan-card" (click)="loadLoan(savedLoan)">
      <h3>{{savedLoan.name}}</h3>
      <div class="loan-details">
        <span>Principal: {{savedLoan.principal | currency}}</span>
        <span>Rate: {{savedLoan.rate}}%</span>
        <span *ngIf="savedLoan.termYears">Term: {{savedLoan.termYears}} years</span>
        <span *ngIf="savedLoan.monthlyPayment">Monthly Payment: {{savedLoan.monthlyPayment | currency}}</span>
      </div>
    </div>
  </div>

  <div *ngIf="loan.monthlyPayment" class="results-section">
    <div class="summary-cards">
      <div class="summary-card primary">
        <h2 class="card-title">Monthly Payment</h2>
        <p class="card-value">{{loan.monthlyPayment | currency}}</p>
      </div>
      
      <div class="summary-card secondary" *ngIf="loan.extraPrincipalPayment">
        <h3 class="card-title">Extra Payment</h3>
        <p class="card-value">{{loan.extraPrincipalPayment | currency}}</p>
        <p class="card-subtitle">per month</p>
      </div>
      
      <div class="summary-card accent" *ngIf="loan.totalInterestPaid">
        <h2 class="card-title">Total Interest</h2>
        <p class="card-value">{{loan.totalInterestPaid | currency}}</p>
      </div>
    </div>
    
    <div class="loan-message" *ngIf="loan.loanMessage">
      <div class="message-card">
        <h2>{{loan.loanMessage}}</h2>
      </div>
    </div>
    
    <div class="payment-schedule">
      <h2 class="schedule-title">Payment Schedule</h2>
      <div class="schedule-container">
        <div class="schedule-header">
          <span class="header-item">Month</span>
          <span class="header-item">Balance</span>
          <span class="header-item">Interest</span>
          <span class="header-item">Principal</span>
        </div>
        <div class="schedule-body">
          <div *ngFor="let month of loan.loanMonths" class="schedule-row">
            <span class="schedule-item month">{{month.monthNum}}</span>
            <span class="schedule-item balance">{{month.principal | currency}}</span>
            <span class="schedule-item interest">{{month.towardsInterest | currency}}</span>
            <span class="schedule-item principal">{{month.towardsPrincipal | currency}}</span>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>